<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pkb_client.client &#8212; pkb_client v2.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=12dfc556" />
    <script src="../../_static/documentation_options.js?v=aa039f9c"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for pkb_client.client</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">pkb_client.dns</span> <span class="kn">import</span> <span class="n">DNSRecord</span><span class="p">,</span> <span class="n">DNSRestoreMode</span><span class="p">,</span> <span class="n">DNSRecordType</span>
<span class="kn">from</span> <span class="nn">pkb_client.domain</span> <span class="kn">import</span> <span class="n">DomainInfo</span>
<span class="kn">from</span> <span class="nn">pkb_client.forwarding</span> <span class="kn">import</span> <span class="n">URLForwarding</span><span class="p">,</span> <span class="n">URLForwardingType</span>
<span class="kn">from</span> <span class="nn">pkb_client.ssl_cert</span> <span class="kn">import</span> <span class="n">SSLCertBundle</span>

<span class="n">API_ENDPOINT</span> <span class="o">=</span> <span class="s2">&quot;https://porkbun.com/api/json/v3/&quot;</span>

<span class="c1"># prevent urllib3 to log request with the api key and secret</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;urllib3&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>


<div class="viewcode-block" id="PKBClientException">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClientException">[docs]</a>
<span class="k">class</span> <span class="nc">PKBClientException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="PKBClient">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient">[docs]</a>
<span class="k">class</span> <span class="nc">PKBClient</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    API client for Porkbun.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">secret_api_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">api_endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">API_ENDPOINT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new PKBClient object.</span>

<span class="sd">        :param api_key: the API key used for Porkbun API calls</span>
<span class="sd">        :param secret_api_key: the API secret used for Porkbun API calls</span>
<span class="sd">        :param api_endpoint: the endpoint of the Porkbun API. Default is https://porkbun.com/api/json/v3/</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret_api_key</span> <span class="o">=</span> <span class="n">secret_api_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span> <span class="o">=</span> <span class="n">api_endpoint</span>

    <span class="k">def</span> <span class="nf">_get_auth_request_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the request json for the authentication of the Porkbun API calls.</span>

<span class="sd">        :return: the request json for the authentication of the Porkbun API calls</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret_api_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secret_api_key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;apikey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">,</span>
            <span class="s2">&quot;secretapikey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">secret_api_key</span>
        <span class="p">}</span>

<div class="viewcode-block" id="PKBClient.ping">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.ping">[docs]</a>
    <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API ping method: get the current public ip address of the requesting system; can also be used for auth checking.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Authentication for more info.</span>

<span class="sd">        :return: the current public ip address of the requesting system</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="s2">&quot;ping&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;yourIp&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_create">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_create">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="n">record_type</span><span class="p">:</span> <span class="n">DNSRecordType</span><span class="p">,</span>
                   <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">ttl</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
                   <span class="n">prio</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS create method: create a new DNS record for given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Create%20Record for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be created</span>
<span class="sd">        :param record_type: the type of the new DNS record</span>
<span class="sd">        :param content: the content of the new DNS record</span>
<span class="sd">        :param name: the subdomain for which the new DNS record entry should apply; the * can be used for a</span>
<span class="sd">                     wildcard DNS record; if not used, then a DNS record for the root domain will be created</span>
<span class="sd">        :param ttl: the time to live in seconds of the new DNS record; have to be between 0 and 2147483647</span>
<span class="sd">        :param prio: the priority of the new DNS record</span>

<span class="sd">        :return: the id of the new created DNS record</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">ttl</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="mi">300</span> <span class="o">&lt;=</span> <span class="n">ttl</span> <span class="o">&lt;=</span> <span class="mi">2147483647</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;dns/create/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">(),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">record_type</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
            <span class="s2">&quot;ttl&quot;</span><span class="p">:</span> <span class="n">ttl</span><span class="p">,</span>
            <span class="s2">&quot;prio&quot;</span><span class="p">:</span> <span class="n">prio</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_edit">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_edit">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">record_type</span><span class="p">:</span> <span class="n">DNSRecordType</span><span class="p">,</span>
                 <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
                 <span class="n">prio</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS edit method: edit an existing DNS record specified by the id for a given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Edit%20Record for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be edited</span>
<span class="sd">        :param record_id: the id of the DNS record which should be edited</span>
<span class="sd">        :param record_type: the new type of the DNS record</span>
<span class="sd">        :param content: the new content of the DNS record</span>
<span class="sd">        :param name: the new value of the subdomain for which the DNS record should apply; the * can be used for a</span>
<span class="sd">                     wildcard DNS record; if not set, the record will be set for the record domain</span>
<span class="sd">        :param ttl: the new time to live in seconds of the DNS record, have to be between 0 and 2147483647</span>
<span class="sd">        :param prio: the new priority of the DNS record</span>

<span class="sd">        :return: True if the editing was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">record_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">ttl</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="mi">300</span> <span class="o">&lt;=</span> <span class="n">ttl</span> <span class="o">&lt;=</span> <span class="mi">2147483647</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;dns/edit/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">(),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">record_type</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
            <span class="s2">&quot;ttl&quot;</span><span class="p">:</span> <span class="n">ttl</span><span class="p">,</span>
            <span class="s2">&quot;prio&quot;</span><span class="p">:</span> <span class="n">prio</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_edit_all">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_edit_all">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_edit_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                     <span class="n">record_type</span><span class="p">:</span> <span class="n">DNSRecordType</span><span class="p">,</span>
                     <span class="n">subdomain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                     <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                     <span class="n">ttl</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
                     <span class="n">prio</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS edit method: edit all existing DNS record matching the domain, record type and subdomain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Edit%20Record%20by%20Domain,%20Subdomain%20and%20Type for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be edited</span>
<span class="sd">        :param record_type: the type of the DNS record</span>
<span class="sd">        :param subdomain: the subdomain of the DNS record can be empty string for root domain</span>
<span class="sd">        :param content: the new content of the DNS record</span>
<span class="sd">        :param ttl: the new time to live in seconds of the DNS record, have to be between 0 and 2147483647</span>
<span class="sd">        :param prio: the new priority of the DNS record</span>

<span class="sd">        :return: True if the editing was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;dns/editByNameType/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">record_type</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subdomain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">(),</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">record_type</span><span class="p">,</span>
            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
            <span class="s2">&quot;ttl&quot;</span><span class="p">:</span> <span class="n">ttl</span><span class="p">,</span>
            <span class="s2">&quot;prio&quot;</span><span class="p">:</span> <span class="n">prio</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_delete">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_delete">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="n">record_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS delete method: delete an existing DNS record specified by the id for a given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Delete%20Record for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be deleted</span>
<span class="sd">        :param record_id: the id of the DNS record which should be deleted</span>

<span class="sd">        :return: True if the deletion was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">record_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">record_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;dns/delete/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_delete_all">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_delete_all">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_delete_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                       <span class="n">record_type</span><span class="p">:</span> <span class="n">DNSRecordType</span><span class="p">,</span>
                       <span class="n">subdomain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS delete method: delete all existing DNS record matching the domain, record type and subdomain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Delete%20Records%20by%20Domain,%20Subdomain%20and%20Type for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be deleted</span>
<span class="sd">        :param record_type: the type of the DNS record</span>
<span class="sd">        :param subdomain: the subdomain of the DNS record can be empty string for root domain</span>

<span class="sd">        :return: True if the deletion was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">record_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;dns/deleteByNameType/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">record_type</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subdomain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_retrieve">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_retrieve">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DNSRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS retrieve method: retrieve all DNS records for given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Retrieve%20Records for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS records should be retrieved</span>

<span class="sd">        :return: list of DNSRecords objects</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="s2">&quot;dns/retrieve/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">domain</span><span class="p">))</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">DNSRecord</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="p">[])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_retrieve_all">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_retrieve_all">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_retrieve_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">record_type</span><span class="p">:</span> <span class="n">DNSRecordType</span><span class="p">,</span>
                         <span class="n">subdomain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DNSRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API DNS retrieve method: retrieve all DNS records matching the domain, record type and subdomain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#DNS%20Retrieve%20Records%20by%20Domain,%20Subdomain%20and%20Type for more info.</span>

<span class="sd">        :param domain: the domain for which the DNS records should be retrieved</span>
<span class="sd">        :param record_type: the type of the DNS records</span>
<span class="sd">        :param subdomain: the subdomain of the DNS records can be empty string for root domain</span>

<span class="sd">        :return: list of DNSRecords objects</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">record_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;dns/retrieveByNameType/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">record_type</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">subdomain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">DNSRecord</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">,</span> <span class="p">[])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.dns_export">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_export">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Export all DNS record from the given domain as json to a file.</span>
<span class="sd">        This method does not represent a Porkbun API method.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be retrieved and saved</span>
<span class="sd">        :param filename: the filename where to save the exported DNS records</span>

<span class="sd">        :return: True if everything went well</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;retrieve current DNS records...&quot;</span><span class="p">)</span>
        <span class="n">dns_records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dns_retrieve</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;save DNS records to </span><span class="si">{}</span><span class="s2"> ...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="c1"># merge the single DNS records into one single dict with the record id as key</span>
        <span class="n">dns_records_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">dns_records</span><span class="p">:</span>
            <span class="n">dns_records_dict</span><span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">record</span>

        <span class="n">filepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filepath</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;File already exists. Please try another filename&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dns_records_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;export finished&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="PKBClient.dns_import">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.dns_import">[docs]</a>
    <span class="k">def</span> <span class="nf">dns_import</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">restore_mode</span><span class="p">:</span> <span class="n">DNSRestoreMode</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restore all DNS records from a json file to the given domain.</span>
<span class="sd">        This method does not represent a Porkbun API method.</span>

<span class="sd">        :param domain: the domain for which the DNS record should be restored</span>
<span class="sd">        :param filename: the filename from which the DNS records are to be restored</span>
<span class="sd">        :param restore_mode: The restore mode (DNS records are identified by the record id)</span>
<span class="sd">            clean: remove all existing DNS records and restore all DNS records from the provided file</span>
<span class="sd">            replace: replace only existing DNS records with the DNS records from the provided file,</span>
<span class="sd">                     but do not create any new DNS records</span>
<span class="sd">            keep: keep the existing DNS records and only create new ones for all DNS records from</span>
<span class="sd">                  the specified file if they do not exist</span>

<span class="sd">        :return: True if everything went well</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">restore_mode</span><span class="p">,</span> <span class="n">DNSRestoreMode</span><span class="p">)</span>

        <span class="n">existing_dns_records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dns_retrieve</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">exported_dns_records_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">restore_mode</span> <span class="ow">is</span> <span class="n">DNSRestoreMode</span><span class="o">.</span><span class="n">clear</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;restore mode: clear&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># delete all existing DNS records</span>
                <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">existing_dns_records</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dns_delete</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

                <span class="c1"># restore all exported records by creating new DNS records</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">exported_record</span> <span class="ow">in</span> <span class="n">exported_dns_records_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dns_create</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                                    <span class="n">record_type</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                                    <span class="n">content</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
                                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                    <span class="n">ttl</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;ttl&quot;</span><span class="p">],</span>
                                    <span class="n">prio</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;prio&quot;</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;something went wrong: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__handle_error_backup__</span><span class="p">(</span><span class="n">existing_dns_records</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;import failed&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">restore_mode</span> <span class="ow">is</span> <span class="n">DNSRestoreMode</span><span class="o">.</span><span class="n">replace</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;restore mode: replace&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">existing_record</span> <span class="ow">in</span> <span class="n">existing_dns_records</span><span class="p">:</span>
                    <span class="n">record_id</span> <span class="o">=</span> <span class="n">existing_record</span><span class="o">.</span><span class="n">id</span>
                    <span class="n">exported_record</span> <span class="o">=</span> <span class="n">exported_dns_records_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">record_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="c1"># also check if the exported dns record is different to the existing record,</span>
                    <span class="c1"># so we can reduce unnecessary api calls</span>
                    <span class="k">if</span> <span class="n">exported_record</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">exported_record</span> <span class="o">!=</span> <span class="n">existing_record</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dns_edit</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                                      <span class="n">record_id</span><span class="o">=</span><span class="n">record_id</span><span class="p">,</span>
                                      <span class="n">record_type</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                                      <span class="n">content</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
                                      <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                      <span class="n">ttl</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;ttl&quot;</span><span class="p">],</span>
                                      <span class="n">prio</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;prio&quot;</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;something went wrong: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__handle_error_backup__</span><span class="p">(</span><span class="n">existing_dns_records</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import failed&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">restore_mode</span> <span class="ow">is</span> <span class="n">DNSRestoreMode</span><span class="o">.</span><span class="n">keep</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;restore mode: keep&quot;</span><span class="p">)</span>

            <span class="n">existing_dns_records_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">existing_dns_records</span><span class="p">:</span>
                <span class="n">existing_dns_records_dict</span><span class="p">[</span><span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">record</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">exported_record</span> <span class="ow">in</span> <span class="n">exported_dns_records_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing_dns_records_dict</span><span class="p">:</span>
                        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dns_create</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span>
                                        <span class="n">record_type</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span>
                                        <span class="n">content</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
                                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                        <span class="n">ttl</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;ttl&quot;</span><span class="p">],</span>
                                        <span class="n">prio</span><span class="o">=</span><span class="n">exported_record</span><span class="p">[</span><span class="s2">&quot;prio&quot;</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;something went wrong: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__handle_error_backup__</span><span class="p">(</span><span class="n">existing_dns_records</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;import failed&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;restore mode not supported&quot;</span><span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;import successfully completed&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="PKBClient.update_dns_servers">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.update_dns_servers">[docs]</a>
    <span class="k">def</span> <span class="nf">update_dns_servers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name_servers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the name servers of the specified domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20Update%20Name%20Servers for more info.</span>

<span class="sd">        :return: True if everything went well</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">name_servers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">name_servers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;domain/updateNs/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">(),</span>
            <span class="s2">&quot;ns&quot;</span><span class="p">:</span> <span class="n">name_servers</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span> <span class="ow">and</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.get_dns_servers">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.get_dns_servers">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dns_servers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the name servers for the given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20Get%20Name%20Servers for more info.</span>

<span class="sd">        :return: list of name servers</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;domain/getNs/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ns&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.list_domains">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.list_domains">[docs]</a>
    <span class="k">def</span> <span class="nf">list_domains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DomainInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all domains for the account in chunks of 1000. If you reach the end of all domains, the list will be empty.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20List%20All for more info.</span>

<span class="sd">        :param start: the index of the first domain to retrieve</span>

<span class="sd">        :return: list of DomainInfo objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">start</span> <span class="o">&gt;=</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="s2">&quot;domain/listAll&quot;</span><span class="p">)</span>

        <span class="n">req_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">(),</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="n">start</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">DomainInfo</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;domains&quot;</span><span class="p">,</span> <span class="p">[])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.get_url_forward">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.get_url_forward">[docs]</a>
    <span class="k">def</span> <span class="nf">get_url_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">URLForwarding</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the url forwarding for the given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20Get%20URL%20Forwarding for more info.</span>

<span class="sd">        :return: list of URLForwarding objects</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;domain/getUrlForwarding/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">URLForwarding</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">forwarding</span><span class="p">)</span> <span class="k">for</span> <span class="n">forwarding</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;forwards&quot;</span><span class="p">,</span> <span class="p">[])]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.add_url_forward">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.add_url_forward">[docs]</a>
    <span class="k">def</span> <span class="nf">add_url_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">subdomain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                        <span class="nb">type</span><span class="p">:</span> <span class="n">URLForwardingType</span><span class="p">,</span>
                        <span class="n">include_path</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                        <span class="n">wildcard</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an url forward for the given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20Add%20URL%20Forward for more info.</span>

<span class="sd">        :param domain: the domain for which the url forwarding should be added</span>
<span class="sd">        :param subdomain: the subdomain for which the url forwarding should be added, can be empty for root domain</span>
<span class="sd">        :param location: the location to which the url forwarding should redirect</span>
<span class="sd">        :param type: the type of the url forwarding</span>
<span class="sd">        :param include_path: if the path should be included in the url forwarding</span>
<span class="sd">        :param wildcard: if the url forwarding should also be applied to all subdomains</span>

<span class="sd">        :return: True if the forwarding was added successfully</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;domain/addUrlForward/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="p">{</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">(),</span>
            <span class="s2">&quot;subdomain&quot;</span><span class="p">:</span> <span class="n">subdomain</span><span class="p">,</span>
            <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="n">location</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
            <span class="s2">&quot;includePath&quot;</span><span class="p">:</span> <span class="n">include_path</span><span class="p">,</span>
            <span class="s2">&quot;wildcard&quot;</span><span class="p">:</span> <span class="n">wildcard</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.delete_url_forward">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.delete_url_forward">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_url_forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete an url forward for the given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20Delete%20URL%20Forward for more info.</span>

<span class="sd">        :param domain: the domain for which the url forwarding should be deleted</span>
<span class="sd">        :param id: the id of the url forwarding which should be deleted</span>

<span class="sd">        :return: True if the deletion was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="nb">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;domain/deleteUrlForward/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.get_domain_pricing">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.get_domain_pricing">[docs]</a>
    <span class="k">def</span> <span class="nf">get_domain_pricing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the pricing for all Porkbun domains.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#Domain%20Pricing for more info.</span>

<span class="sd">        :return: dict with pricing</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="s2">&quot;pricing/get&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


<div class="viewcode-block" id="PKBClient.ssl_retrieve">
<a class="viewcode-back" href="../../pkb_client.html#pkb_client.client.PKBClient.ssl_retrieve">[docs]</a>
    <span class="k">def</span> <span class="nf">ssl_retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SSLCertBundle</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        API SSL bundle retrieve method: retrieve an SSL bundle for the given domain.</span>
<span class="sd">        See https://porkbun.com/api/json/v3/documentation#SSL%20Retrieve%20Bundle%20by%20Domain for more info.</span>

<span class="sd">        :param domain: the domain for which the SSL bundle should be retrieved</span>

<span class="sd">        :return: tuple of intermediate certificate, certificate chain, private key, public key</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">domain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api_endpoint</span><span class="p">,</span> <span class="s2">&quot;ssl/retrieve/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">domain</span><span class="p">))</span>
        <span class="n">req_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_auth_request_json</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">req_json</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">ssl_bundle</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">SSLCertBundle</span><span class="p">(</span><span class="n">intermediate_certificate</span><span class="o">=</span><span class="n">ssl_bundle</span><span class="p">[</span><span class="s2">&quot;intermediate_certificate&quot;</span><span class="p">],</span>
                                 <span class="n">certificate_chain</span><span class="o">=</span><span class="n">ssl_bundle</span><span class="p">[</span><span class="s2">&quot;certificate_chain&quot;</span><span class="p">],</span>
                                 <span class="n">private_key</span><span class="o">=</span><span class="n">ssl_bundle</span><span class="p">[</span><span class="s2">&quot;private_key&quot;</span><span class="p">],</span>
                                 <span class="n">public_key</span><span class="o">=</span><span class="n">ssl_bundle</span><span class="p">[</span><span class="s2">&quot;public_key&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">PKBClientException</span><span class="p">(</span><span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown status&quot;</span><span class="p">),</span>
                                     <span class="n">response_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown message&quot;</span><span class="p">))</span></div>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__handle_error_backup__</span><span class="p">(</span><span class="n">dns_records</span><span class="p">):</span>
        <span class="c1"># merge the single DNS records into one single dict with the record id as key</span>
        <span class="n">dns_records_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">dns_records</span><span class="p">:</span>
            <span class="n">dns_records_dict</span><span class="p">[</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">record</span>

        <span class="c1"># generate filename with incremental suffix</span>
        <span class="n">base_backup_filename</span> <span class="o">=</span> <span class="s2">&quot;pkb_client_dns_records_backup&quot;</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">backup_file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">.json&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">base_backup_filename</span><span class="p">,</span> <span class="n">suffix</span><span class="p">))</span>
        <span class="k">while</span> <span class="n">backup_file_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">suffix</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">backup_file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">.json&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">base_backup_filename</span><span class="p">,</span> <span class="n">suffix</span><span class="p">))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">backup_file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dns_records_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a backup of your existing dns records was saved to </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">backup_file_path</span><span class="p">)))</span></div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">pkb_client</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">pkb_client</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023-2024, infinityofspace.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
    </div>

    

    
  </body>
</html>